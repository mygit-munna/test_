var get_CurrentPosition={lat:null,lng:null,accuracy:null,init:function(){if("https:"!==window.location.protocol&&"127.0.0.1"!==window.location.host||!navigator.geolocation)return!1;navigator.geolocation.getCurrentPosition(get_CurrentPosition.set_LatLng)},print_Error:function(e){},set_LatLng:function(e){get_CurrentPosition.lat=e.coords.latitude,get_CurrentPosition.lng=e.coords.longitude,get_CurrentPosition.accuracy=e.coords.accuracy},get_LatLng:function(){return{lat:get_CurrentPosition.lat,lng:get_CurrentPosition.lng}}};window.addEventListener("load",(function(e){})),function(e,o){"use strict";var t={init:function(){o.hooks.addAction("frontend/element_ready/eac-addon-open-streetmap.default",t.widgetOpenStreetMap)},widgetOpenStreetMap:function(o){var t=o.find(".eac-open-streetmap"),n=t.find(".osm-map_wrapper"),a=n.find(".osm-map_wrapper-markercenter"),r=n.find(".osm-map_wrapper-marker"),i=t.find("#osm_nonce").val(),l=n.data("settings")||{},s=eacElementsPath.osmImages,p=eacElementsPath.proxies+"proxy-osm.php",c=eacElementsPath.osmConfig+"osmTiles.json",d={lat:null,lng:null,title:"",content:""},u=L.Icon.extend({options:{shadowUrl:s+"marker-shadow.png",shadowSize:[41,41],shadowAnchor:[17,41]}}),m=[];if(0!==Object.keys(l).length){fetch(p+"/?url="+encodeURIComponent(c)+"&id="+l.data_id+"&nonce="+i).then((function(e){return e.json()})).then((function(e){Object.keys(e).length>0&&f(e)})).catch((function(e){}));var f=function(o){d.title=a.find(".osm-map_marker-title")[0].innerText,d.content=a.find(".osm-map_marker-content")[0].innerHTML,d.lat=a.data("lat"),d.lng=a.data("lng");var t={},c={};e.each(o,(function(e,o){if(o.url&&o.url.length>0&&o.options&&Object.keys(o.options).length>0){var n=L.tileLayer(o.url,o.options),a=o.options.title?o.options.title:e;"tile"===(o.options.type?o.options.type:"tile")?t[a]=n:c[a]=n}}));var f=L.map(l.data_id,{center:[d.lat,d.lng],layers:t[l.data_layer],closePopupOnClick:l.data_clickpopup,zoom:l.data_zoom,zoomControl:!l.data_zoompos,tap:!1}),_=L.control.layers(t,c,{collapsed:l.data_collapse_menu}).addTo(f);l.data_collapse_menu||(n.find(".leaflet-control-layers").on("mouseleave",(function(){_.collapse()})),n.find(".leaflet-control-layers-toggle").on("mouseenter",(function(){_.expand()}))),n.find(".leaflet-control-layers-base").prepend("<label class='osm-map_layers-title'>Tiles Layer</label>"),n.find(".leaflet-control-layers-overlays").prepend("<label class='osm-map_layers-title'>Overlays</label>"),l.data_zoompos&&L.control.zoom({position:"bottomleft"}).addTo(f),l.data_fullscreen&&L.control.fullscreen({position:l.data_zoompos?"bottomleft":"topleft",title:"Show me the fullscreen !",titleCancel:"Exit fullscreen mode",content:null,forceSeparateButton:!1,forcePseudoFullscreen:!0,fullscreenElement:!1}).addTo(f);var g=new u({iconUrl:s+"osm-icons/default.png",iconSize:[45,45],iconAnchor:[22.5,45],popupAnchor:[0,-45]}),h="<div class='osm-map_popup-title'>"+d.title+"</div><div class='osm-map_popup-content'>"+d.content+"</div>",y=L.marker([d.lat,d.lng],{icon:g}).addTo(f).bindPopup(h);if(l.data_openpopup&&y.openPopup(),m.push(L.marker(new L.LatLng(d.lat,d.lng))),l.data_import){if(""!==l.data_import_url){var v=l.data_import_sizes.split(",").map(Number),w=[v[0]/2,v[1]],b=[0,-v[1]],k=new u({iconUrl:s+"osm-icons/"+l.data_import_icon,iconSize:v,iconAnchor:w,popupAnchor:b});e.ajax({url:p,type:"GET",data:{url:encodeURIComponent(l.data_import_url),id:l.data_id,nonce:i}}).done((function(o,t,n){if(o.type&&"FeatureCollection"===o.type){var a=l.data_keywords.includes(",")?l.data_keywords.split(","):[],r=L.geoJSON(o,{pointToLayer:function(e,o){return new L.Marker(o,{icon:k})},onEachFeature:function(o,t){if(a.length>0){var n="";e.each(a,(function(e,t){var a=(t=t.split("|"))[0],r=2===t.length?t[1]:t[0];if(o.properties[a])try{var i=new URL(o.properties[a]);n+="<a href='"+i+"' target='_blank' rel='nofollow noopener noreferrer'>"+r+"</a><br/>"}catch{n+="<div class='osm-map_popup-content'><span class='osm-map_popup-label'>"+r+":</span><span class='osm-map_popup-value'> "+o.properties[a]+"</span></div>"}})),t.bindPopup(n)}}}),i=L.markerClusterGroup().addLayer(r);f.addLayer(i).fitBounds(i.getBounds())}else alert(JSON.stringify(o))})).fail((function(e,o,t){alert(t)}))}}else if(e.each(r,(function(o,t){var n=e(t).data("lat"),a=e(t).data("lng"),r=e(t).data("icon"),i=e(t).find(".osm-map_marker-title")[0].innerText,l=e(t).find(".osm-map_marker-content")[0].innerHTML,p=e(t).data("sizes").split(",").map(Number),c=[p[0]/2,p[1]],d=[0,-p[1]],_=new u({iconUrl:s+"osm-icons/"+r,iconSize:p,iconAnchor:c,popupAnchor:d});L.marker([n,a],{icon:_}).addTo(f).bindPopup("<div class='osm-map_popup-title'>"+i+"</div><div class='osm-map_popup-content'>"+l+"</div>"),m.push(L.marker(new L.LatLng(n,a)))})),m.length>0&&l.data_zoomauto){var C=L.featureGroup(m);f.fitBounds(C.getBounds(),{padding:[50,50]})}return!1===l.data_wheelzoom&&f.scrollWheelZoom.disable(),!1===l.data_dblclick&&f.doubleClickZoom.disable(),!1===l.data_draggable&&f.dragging.disable(),f}}}};e(window).on("elementor/frontend/init",t.init)}(jQuery,window.elementorFrontend);