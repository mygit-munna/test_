class widgetMegaMenu extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{targetInstance:".eac-mega-menu",parentElement:".eac-mega-menu",target_nav:".mega-menu_nav-wrapper",target_top_link:".mega-menu_top-link",target_sub_link:".mega-menu_sub-link",target_sub_menu:".mega-menu_sub-menu",button_toggle_open:".mega-menu_flyout-open",button_toggle_close:".mega-menu_flyout-close",cart_quantity:"#menu-item-mini-cart span.badge-cart__quantity",icon_down:".mega-menu_nav-menu .mega-menu_icon-down:not(.responsive)",icon_down_resp:".mega-menu_nav-menu .mega-menu_icon-down.responsive",icon_up:".mega-menu_nav-menu .mega-menu_icon-up:not(.responsive)",icon_up_resp:".mega-menu_nav-menu .mega-menu_icon-up.responsive",icon_right:".mega-menu_nav-menu .mega-menu_icon-right",breakpoint:".mega-menu_nav-wrapper",sticky:".mega-menu_nav-wrapper"}}}getDefaultElements(){const e=this.getSettings("selectors"),t={$targetInstance:this.$element.find(e.targetInstance),$parentElement:this.$element.find(e.parentElement).parent(),$target_nav:this.$element.find(e.target_nav),$target_top_link:this.$element.find(e.target_top_link),$target_sub_link:this.$element.find(e.target_sub_link),$target_sub_menu:this.$element.find(e.target_sub_menu),$button_toggle_open:this.$element.find(e.button_toggle_open),$button_toggle_close:this.$element.find(e.button_toggle_close),$cart_quantity:this.$element.find(e.cart_quantity),$icon_down:this.$element.find(e.icon_down),$icon_down_resp:this.$element.find(e.icon_down_resp),$icon_up:this.$element.find(e.icon_up),$icon_up_resp:this.$element.find(e.icon_up_resp),$icon_right:this.$element.find(e.icon_right),breakpoint:this.$element.find(e.breakpoint).data("breakpoint"),isSticky:this.$element.find(e.sticky).data("enable-fixed"),mediaQuery:null,optionsObserve:{root:null,rootMargin:"-40px 0px 0px 0px",threshold:0},fixedClass:"menu-fixed",isEditMode:elementorFrontend.isEditMode(),adminBar:document.getElementById("wpadminbar")};return t.$targetInstance.css("display","block"),t.mediaQuery=window.matchMedia(t.breakpoint),t}bindEvents(){if(this.elements.mediaQuery.addEventListener("change",this.onMediaQueryChange.bind(this)),jQuery(document.body).on("removed_from_cart",this.onRemovedFromCart.bind(this)),window.IntersectionObserver&&"yes"===this.elements.isSticky&&!this.elements.isEditMode){new IntersectionObserver(this.observeElementInViewport.bind(this),this.elements.optionsObserve).observe(this.elements.$parentElement[0])}this.elements.mediaQuery.matches&&(this.elements.$target_nav.addClass("breakpoint"),this.widgetToggleOn())}widgetToggleOn(){this.bindButtonsToggleEvents(),this.elements.$button_toggle_open.css("display","block"),this.elements.$button_toggle_open.attr("aria-expanded","false"),this.elements.$button_toggle_close.css("display","none"),this.elements.$button_toggle_close.attr("aria-expanded","false"),this.elements.$icon_right.css("display","none"),this.elements.$icon_down.css("display","inline-block"),this.elements.$icon_down_resp.css("display","inline-block"),this.elements.$icon_up.css("display","none"),this.elements.$icon_up_resp.css("display","none"),this.elements.$target_nav.css("display","none"),this.elements.$target_top_link.nextAll(".mega-menu_sub-menu").css("display","none"),this.elements.$target_top_link.nextAll(".mega-menu_sub-menu").css("visibility","visible"),this.elements.$target_top_link.nextAll(".mega-menu_sub-menu").css("opacity",1),this.elements.$target_sub_link.nextAll(".mega-menu_sub-menu").css("display","none"),this.elements.$target_sub_link.nextAll(".mega-menu_sub-menu").css("visibility","visible"),this.elements.$target_sub_link.nextAll(".mega-menu_sub-menu").css("opacity",1)}widgetToggleOff(){this.elements.$button_toggle_open.off("click"),this.elements.$button_toggle_close.off("click"),this.elements.$target_top_link.off("click"),this.elements.$target_sub_link.off("click"),this.elements.$button_toggle_open.css("display","none"),this.elements.$button_toggle_open.attr("aria-expanded","false"),this.elements.$button_toggle_close.css("display","none"),this.elements.$button_toggle_close.attr("aria-expanded","false"),this.elements.$icon_right.css("display","inline-block"),this.elements.$icon_down.css("display","inline-block"),this.elements.$icon_down_resp.css("display","none"),this.elements.$icon_up.css("display","none"),this.elements.$icon_up_resp.css("display","none"),this.elements.$target_nav.css("display","block"),this.elements.$target_sub_menu.css("display","block"),this.elements.$target_sub_menu.css("visibility","hidden"),this.elements.$target_sub_menu.css("opacity",0)}bindButtonsToggleEvents(){this.elements.$button_toggle_open.on("click",this.onButtonToggleOpen.bind(this)),this.elements.$button_toggle_close.on("click",this.onButtonToggleClose.bind(this)),this.elements.$target_top_link.on("click",this.onTargetTopLink.bind(this)),this.elements.$target_sub_link.on("click",this.onTargetSubLink.bind(this))}observeElementInViewport(e,t){e[0].target;e[0].intersectionRatio>0?(this.elements.$targetInstance[0].classList.remove(this.elements.fixedClass),this.elements.$targetInstance[0].style.top=""):(this.elements.$targetInstance[0].classList.add(this.elements.fixedClass),this.elements.adminBar&&(this.elements.$targetInstance[0].style.top=this.elements.adminBar.clientHeight+"px"))}onRemovedFromCart(){var e=this.elements;jQuery.ajax({url:eacUpdateCounter.ajax_url,type:"post",data:{action:eacUpdateCounter.ajax_action,nonce:eacUpdateCounter.ajax_nonce}}).done((function(t){!0===t.success&&e.$cart_quantity.text(t.data)}))}onMediaQueryChange(){window.matchMedia(this.elements.breakpoint).matches?(this.elements.$target_nav.addClass("breakpoint"),this.widgetToggleOn()):(this.elements.$target_nav.removeClass("breakpoint"),this.widgetToggleOff())}onButtonToggleOpen(e){e.stopImmediatePropagation(),this.elements.$button_toggle_open.css("display","none"),this.elements.$button_toggle_open.attr("aria-expanded","true"),this.elements.$button_toggle_close.css("display","block"),this.elements.$button_toggle_close.attr("aria-expanded","true"),this.elements.$target_nav.toggle()}onButtonToggleClose(e){e.stopImmediatePropagation(),this.elements.$button_toggle_close.css("display","none"),this.elements.$button_toggle_close.attr("aria-expanded","false"),this.elements.$button_toggle_open.css("display","block"),this.elements.$button_toggle_open.attr("aria-expanded","false"),this.elements.$target_nav.toggle(),this.elements.$target_top_link.nextAll(".mega-menu_sub-menu").css("display","none"),this.elements.$target_top_link.find(".mega-menu_icon-down").css("display","inline-block"),this.elements.$target_top_link.find(".mega-menu_icon-up.responsive").css("display","none"),this.elements.$target_sub_link.nextAll(".mega-menu_sub-menu").css("display","none"),this.elements.$target_sub_link.find(".mega-menu_icon-down.responsive").css("display","inline-block"),this.elements.$target_sub_link.find(".mega-menu_icon-up.responsive").css("display","none")}onTargetTopLink(e){const t=jQuery(e.currentTarget);this.elements.$target_sub_menu.not(t.nextAll(".mega-menu_sub-menu:first")).slideUp(),this.elements.$target_top_link.not(t).find(".mega-menu_icon-down").css("display","inline-block"),this.elements.$target_top_link.not(t).find(".mega-menu_icon-up.responsive").css("display","none"),this.elements.$target_sub_link.nextAll(".mega-menu_sub-menu:first").css("display","none"),this.elements.$target_sub_link.find(".mega-menu_icon-down.responsive").css("display","inline-block"),this.elements.$target_sub_link.find(".mega-menu_icon-up.responsive").css("display","none"),t.nextAll(".mega-menu_sub-menu:first").slideToggle(),t.find(".mega-menu_icon-down").toggle(),t.find(".mega-menu_icon-up.responsive").toggle()}onTargetSubLink(e){const t=jQuery(e.currentTarget);t.nextAll(".mega-menu_sub-menu:first").slideToggle(),t.find(".mega-menu_icon-down.responsive").toggle(),t.find(".mega-menu_icon-up.responsive").toggle()}}jQuery(window).on("elementor/frontend/init",(()=>{elementorFrontend.hooks.addAction("frontend/element_ready/eac-addon-mega-menu.default",(e=>{elementorFrontend.elementsHandler.addHandler(widgetMegaMenu,{$element:e})}))}));